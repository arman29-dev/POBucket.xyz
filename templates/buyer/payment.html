{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="{% static 'css/bgStyle.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/payment.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/payment-btn.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/alert.css' %}">

    <title>POBâ€¢Payment</title>
</head>


<body class="bg-grid">
    <main>
        {% if messages %}
        {% for message in messages %}
        <!-- alert msg box -->
        <div class="custom-alert alert-dismissible fade show" role="alert">
            <div class="alert-content">
                <i class="bi bi-info-circle-fill alert-icon"></i>
                <span class="alert-message">{{ message }}</span>
            </div>
            <button type="button" class="alert-close" data-bs-dismiss="alert" aria-label="Close">
                <i class="bi bi-x"></i>
            </button>
        </div>
        {% endfor %}
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const paymentButton = document.getElementById("payment-button");
                paymentButton.disabled = true;
            });
        </script>
        {% endif %}

        <div class="checkout">
            <div class="credit-card-box">
                <div class="flip">
                    <div class="front">
                        <div class="chip"></div>
                        <div class="logo">
                            <svg version="1.1" id="visa" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="47.834px"
                                height="47.834px" viewBox="0 0 47.834 47.834"
                                style="enable-background:new 0 0 47.834 47.834;">
                                <g>
                                    <g>
                                        <path d="M44.688,16.814h-3.004c-0.933,0-1.627,0.254-2.037,1.184l-5.773,13.074h4.083c0,0,0.666-1.758,0.817-2.143
                                   c0.447,0,4.414,0.006,4.979,0.006c0.116,0.498,0.474,2.137,0.474,2.137h3.607L44.688,16.814z M39.893,26.01
                                   c0.32-0.819,1.549-3.987,1.549-3.987c-0.021,0.039,0.317-0.825,0.518-1.362l0.262,1.23c0,0,0.745,3.406,0.901,4.119H39.893z
                                   M34.146,26.404c-0.028,2.963-2.684,4.875-6.771,4.875c-1.743-0.018-3.422-0.361-4.332-0.76l0.547-3.193l0.501,0.228
                                   c1.277,0.532,2.104,0.747,3.661,0.747c1.117,0,2.313-0.438,2.325-1.393c0.007-0.625-0.501-1.07-2.016-1.77
                                   c-1.476-0.683-3.43-1.827-3.405-3.876c0.021-2.773,2.729-4.708,6.571-4.708c1.506,0,2.713,0.31,3.483,0.599l-0.526,3.092
                                   l-0.351-0.165c-0.716-0.288-1.638-0.566-2.91-0.546c-1.522,0-2.228,0.634-2.228,1.227c-0.008,0.668,0.824,1.108,2.184,1.77
                                   C33.126,23.546,34.163,24.783,34.146,26.404z M0,16.962l0.05-0.286h6.028c0.813,0.031,1.468,0.29,1.694,1.159l1.311,6.304
                                   C7.795,20.842,4.691,18.099,0,16.962z M17.581,16.812l-6.123,14.239l-4.114,0.007L3.862,19.161
                                   c2.503,1.602,4.635,4.144,5.386,5.914l0.406,1.469l3.808-9.729L17.581,16.812L17.581,16.812z M19.153,16.8h3.89L20.61,31.066
                                   h-3.888L19.153,16.8z" />
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <div class="number"></div>
                        <div class="card-holder">
                            <label>Card holder</label>
                            <div></div>
                        </div>
                        <div class="card-expiration-date">
                            <label>Expires</label>
                            <div></div>
                        </div>
                    </div>
                    <div class="back">
                        <div class="strip"></div>
                        <div class="logo">
                            <svg version="1.1" id="visa" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="47.834px"
                                height="47.834px" viewBox="0 0 47.834 47.834"
                                style="enable-background:new 0 0 47.834 47.834;">
                                <g>
                                    <g>
                                        <path d="M44.688,16.814h-3.004c-0.933,0-1.627,0.254-2.037,1.184l-5.773,13.074h4.083c0,0,0.666-1.758,0.817-2.143
                                   c0.447,0,4.414,0.006,4.979,0.006c0.116,0.498,0.474,2.137,0.474,2.137h3.607L44.688,16.814z M39.893,26.01
                                   c0.32-0.819,1.549-3.987,1.549-3.987c-0.021,0.039,0.317-0.825,0.518-1.362l0.262,1.23c0,0,0.745,3.406,0.901,4.119H39.893z
                                   M34.146,26.404c-0.028,2.963-2.684,4.875-6.771,4.875c-1.743-0.018-3.422-0.361-4.332-0.76l0.547-3.193l0.501,0.228
                                   c1.277,0.532,2.104,0.747,3.661,0.747c1.117,0,2.313-0.438,2.325-1.393c0.007-0.625-0.501-1.07-2.016-1.77
                                   c-1.476-0.683-3.43-1.827-3.405-3.876c0.021-2.773,2.729-4.708,6.571-4.708c1.506,0,2.713,0.31,3.483,0.599l-0.526,3.092
                                   l-0.351-0.165c-0.716-0.288-1.638-0.566-2.91-0.546c-1.522,0-2.228,0.634-2.228,1.227c-0.008,0.668,0.824,1.108,2.184,1.77
                                   C33.126,23.546,34.163,24.783,34.146,26.404z M0,16.962l0.05-0.286h6.028c0.813,0.031,1.468,0.29,1.694,1.159l1.311,6.304
                                   C7.795,20.842,4.691,18.099,0,16.962z M17.581,16.812l-6.123,14.239l-4.114,0.007L3.862,19.161
                                   c2.503,1.602,4.635,4.144,5.386,5.914l0.406,1.469l3.808-9.729L17.581,16.812L17.581,16.812z M19.153,16.8h3.89L20.61,31.066
                                   h-3.888L19.153,16.8z" />
                                    </g>
                                </g>
                            </svg>

                        </div>
                        <div class="ccv">
                            <label>CCV</label>
                            <div></div>
                        </div>
                    </div>
                </div>
            </div>
            <form class="form" autocomplete="off" method="post" novalidate>
                <fieldset>
                    <label for="card-number">Card Number</label>
                    <input type="num" id="card-number" class="input-card-number" maxlength="4" />
                    <input type="num" id="card-number-1" class="input-card-number" maxlength="4" />
                    <input type="num" id="card-number-2" class="input-card-number" maxlength="4" />
                    <input type="num" id="card-number-3" class="input-card-number" maxlength="4" />
                </fieldset>
                <fieldset>
                    <label for="card-holder">Card holder</label>
                    <input type="text" id="card-holder" />
                </fieldset>
                <fieldset class="fieldset-expiration">
                    <label for="card-expiration-month">Expiration date</label>
                    <input type="text" name="exp" id="exp" placeholder="MM/YY" minlength="5" maxlength="5">
                </fieldset>
                <fieldset class="fieldset-ccv">
                    <label for="card-ccv">CCV</label>
                    <input type="password" id="card-ccv" maxlength="3" />
                </fieldset>

                <button class="btn-payment" type="submit" id="payment-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 0a4 4 0 0 1 4 4v2.05a2.5 2.5 0 0 1 2 2.45v5a2.5 2.5 0 0 1-2.5 2.5h-7A2.5 2.5 0 0 1 2 13.5v-5a2.5 2.5 0 0 1 2-2.45V4a4 4 0 0 1 4-4m0 1a3 3 0 0 0-3 3v2h6V4a3 3 0 0 0-3-3"/>
                    </svg>
                    <span class="btn-text">Submit Payment</span>

                    <div class="card-animation-container">
                        <!-- Credit Card SVG -->
                        <svg class="credit-card-svg" viewBox="0 0 50 30" xmlns="http://www.w3.org/2000/svg">
                            <rect x="0" y="0" width="50" height="30" rx="3" fill="#2a6dc9" />
                            <rect x="0" y="5" width="50" height="5" fill="#1e4c8f" />
                            <rect x="5" y="15" width="40" height="3" rx="1" fill="#ffffff" opacity="0.7" />
                            <rect x="5" y="20" width="20" height="2" rx="1" fill="#ffffff" opacity="0.5" />
                            <circle cx="40" cy="21" r="3" fill="#ffd700" opacity="0.8" />
                        </svg>

                        <!-- Card Reader SVG - Positioned further right -->
                        <svg class="card-reader-svg" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <rect x="5" y="5" width="30" height="30" rx="2" fill="#333333" />
                            <rect x="10" y="10" width="20" height="5" rx="1" fill="#555555" />
                            <rect x="10" y="25" width="20" height="2" rx="1" fill="#555555" />
                            <rect x="15" y="20" width="10" height="1" fill="#777777" />
                        </svg>

                        <!-- Card Reader Light Effect -->
                        <div class="card-reader-light"></div>

                        <!-- Processing Animation -->
                        <div class="processing-dots">
                            <div class="processing-dot"></div>
                            <div class="processing-dot"></div>
                            <div class="processing-dot"></div>
                        </div>

                        <!-- Success Checkmark -->
                        <svg class="success-checkmark" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="15" cy="15" r="15" fill="#ffffff" opacity="0.2" />
                            <path d="M8 15 L13 20 L22 10" stroke="#ffffff" stroke-width="2" fill="none"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </button>
            </form>

            <div class="payment-summary">
                <h2>Payment Summary</h2>
                <div class="summary">
                    <div class="summary-item">
                        <span>Product</span>
                        <span><i>{{ product.name }}</i></span>
                    </div>
                    <div class="summary-item">
                        <span>Price</span>
                        <span>â‚¹{{ product.price }}</span>
                    </div>
                    <div class="summary-item">
                        <span>Platform Fee</span>
                        <span>â‚¹100</span>
                    </div>
                    <div class="summary-item">
                        <span><b>Total</b></span>
                        <span><b><u>â‚¹{{ total }}</u></b></span>
                    </div>
                </div>
            </div>

            <div align="center" style="margin-top: 10px;">
                <a onclick="window.history.back()" style="color: red; a:hover{cursor: auto;}">Cancel Payment</a>
            </div>
        </div>
    </main>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="{% static 'js/payment.js' %}"></script>
</body>

</html>
